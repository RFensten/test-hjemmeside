---
---

<div class="bg-[#F5F5F0] dark:bg-[#1a1a18] rounded-sm p-8 sm:p-12 border border-[#E8E8E3] dark:border-[#2a2a26]">
  <div class="mx-auto max-w-2xl text-center">
    <h2 class="text-3xl font-serif font-bold tracking-tight text-[#2C2C2C] dark:text-[#EAEAEA] sm:text-4xl">
      Hold dig opdateret
    </h2>
    <p class="mx-auto mt-4 max-w-xl text-lg leading-8 text-[#5C5C5C] dark:text-[#B0B0B0]">
      F친 besked n친r jeg udgiver nye projekter eller deler viden om automatisering og AI. Ingen spam, kun relevant indhold.
    </p>
    
    <!-- 
      Newsletter Form Integration
      Connected to MailerLite
    -->
    <!-- Success Message (Hidden by default) -->
    <div id="newsletter-success" class="hidden mt-10 p-6 bg-green-50 dark:bg-green-900/20 rounded-sm border border-green-100 dark:border-green-900/30">
      <h3 class="text-xl font-bold text-[#4A5D4F] dark:text-[#A4AC86] mb-2">Tak for din tilmelding! 游꿀</h3>
      <p class="text-[#5C5C5C] dark:text-[#B0B0B0]">Du er nu p친 listen og h칮rer fra mig snart.</p>
    </div>

    <!-- Newsletter Form -->
    <form id="newsletter-form" class="mx-auto mt-10 flex max-w-md gap-x-4" action="https://assets.mailerlite.com/jsonp/2074220/forms/177956404628292655/subscribe" method="post">
      <label for="email-address" class="sr-only">Email addresse</label>
      <input 
        id="email-address" 
        name="fields[email]" 
        type="email" 
        autocomplete="email" 
        required 
        class="min-w-0 flex-auto rounded-sm border-0 bg-white dark:bg-[#2a2a26] px-3.5 py-2 text-[#2C2C2C] dark:text-[#EAEAEA] shadow-sm ring-1 ring-inset ring-[#D6D6CF] dark:ring-[#444] placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-[#4A5D4F] dark:focus:ring-[#A4AC86] sm:text-sm sm:leading-6" 
        placeholder="Indtast din email"
      >
      
      <!-- MailerLite Hidden Fields -->
      <input type="hidden" name="ml-submit" value="1">
      <input type="hidden" name="anticsrf" value="true">

      <button 
        type="submit" 
        id="submit-button"
        class="flex-none rounded-sm bg-[#4A5D4F] px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-[#3A4A3F] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#4A5D4F] transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
      >
        Tilmeld
      </button>
    </form>
    
    <p class="mt-4 text-xs text-center text-[#5C5C5C] dark:text-[#777]">
      Jeg passer p친 dine data. Afmeld n친r som helst. 
      <a href="#" class="font-semibold text-[#4A5D4F] dark:text-[#A4AC86] hover:text-[#3A4A3F] dark:hover:text-[#8F9672]">Privacy policy</a>.
    </p>
  </div>
</div>

<script>
  const form = document.getElementById('newsletter-form') as HTMLFormElement;
  const successMessage = document.getElementById('newsletter-success');
  const submitButton = document.getElementById('submit-button') as HTMLButtonElement;

  if (form && successMessage && submitButton) {
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      // UI: Loading state
      submitButton.disabled = true;
      submitButton.textContent = 'Tilmelder...';

      const formData = new FormData(form);

      try {
        // MailerLite often needs 'no-cors' for direct client-side posts if not using their JS
        // This means we won't strictly know if it failed, but it avoids the CORs error.
        await fetch(form.action, {
          method: 'POST',
          body: formData,
          mode: 'no-cors' 
        });

        // Assume success (most common with no-cors)
        form.classList.add('hidden');
        successMessage.classList.remove('hidden');
        
      } catch (error) {
        console.error('Newsletter error:', error);
        alert('Der opstod en fejl. Pr칮v venligst igen.');
        submitButton.disabled = false;
        submitButton.textContent = 'Tilmeld';
      }
    });
  }
</script>
